<!-- Erasmo Cardoso Front simplificado -->

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Gerenciamento de Clientes, Fornecedores e Notas Fiscais</title>
    <style>
        body {
            background-color: #f8f9fa;
            padding: 20px;
        }
        h2 {
            color: #343a40;
            margin-bottom: 30px;
        }
        .section {
            margin-top: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }
        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #004085;
        }
        .form-control {
            border-radius: 5px;
        }
        .form-group label {
            font-weight: bold;
        }
        .list-item {
            background-color: #e9ecef;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        .list-item:hover {
            background-color: #ced4da;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2 class="text-center">Gerenciamento de Clientes, Fornecedores e Notas Fiscais</h2>

        <div class="section">
            <h3>Gerenciamento de Clientes</h3>
            <form id="clienteForm">
                <div class="form-group">
                    <label for="nome">Nome:</label>
                    <input type="text" class="form-control" id="nome" required>
                </div>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" class="form-control" id="email" required>
                </div>
                <div class="form-group">
                    <label for="telefone">Telefone:</label>
                    <input type="text" class="form-control" id="telefone" required>
                </div>
                <button type="submit" class="btn btn-primary">Adicionar Cliente</button>
            </form>
            <h4 class="mt-3">Lista de Clientes</h4>
            <div id="clientes"></div>
        </div>

        <div class="section">
            <h3>Gerenciamento de Fornecedores</h3>
            <form id="fornecedorForm">
                <div class="form-group">
                    <label for="nomeFornecedor">Nome:</label>
                    <input type="text" class="form-control" id="nomeFornecedor" required>
                </div>
                <div class="form-group">
                    <label for="contato">Contato:</label>
                    <input type="text" class="form-control" id="contato" required>
                </div>
                <div class="form-group">
                    <label for="telefoneFornecedor">Telefone:</label>
                    <input type="text" class="form-control" id="telefoneFornecedor" required>
                </div>
                <button type="submit" class="btn btn-primary">Adicionar Fornecedor</button>
            </form>
            <h4 class="mt-3">Lista de Fornecedores</h4>
            <div id="fornecedores"></div>
        </div>

        <div class="section">
            <h3>Gerenciamento de Produtos</h3>
            <form id="produtoForm">
                <div class="form-group">
                    <label for="nomeProduto">Nome:</label>
                    <input type="text" class="form-control" id="nomeProduto" required>
                </div>
                <div class="form-group">
                    <label for="preco">Preço:</label>
                    <input type="number" class="form-control" id="preco" required>
                </div>
                <div class="form-group">
                    <label for="fornecedorIDProduto">Fornecedor ID:</label>
                    <input type="number" class="form-control" id="fornecedorIDProduto" required>
                </div>
                <button type="submit" class="btn btn-primary">Adicionar Produto</button>
            </form>
            <h4 class="mt-3">Lista de Produtos</h4>
            <div id="produtos"></div>
        </div>

        <div class="section">
            <h3>Gerenciamento de Notas Fiscais</h3>
            <form id="notaFiscalForm">
                <div class="form-group">
                    <label for="numeroNota">Número da Nota:</label>
                    <input type="text" class="form-control" id="numeroNota" required>
                </div>
                <div class="form-group">
                    <label for="dataEmissao">Data de Emissão:</label>
                    <input type="date" class="form-control" id="dataEmissao" required>
                </div>
                <div class="form-group">
                    <label for="valorTotal">Valor Total:</label>
                    <input type="number" class="form-control" id="valorTotal" required>
                </div>
                <button type="submit" class="btn btn-primary">Adicionar Nota Fiscal</button>
            </form>
            <h4 class="mt-3">Lista de Notas Fiscais</h4>
            <div id="notasFiscais"></div>
        </div>
    </div>

    <script>
        const API_URL_CLIENTES = "http://localhost:5000/api/clientes";
        const API_URL_FORNECEDORES = "http://localhost:5000/api/fornecedores";
        const API_URL_PRODUTOS = "http://localhost:5000/api/produtos";
        const API_URL_NOTAS_FISCAIS = "http://localhost:5000/api/notas-fiscais"; 

        async function carregarClientes() {
            try {
                const response = await fetch(API_URL_CLIENTES);
                const clientes = await response.json();
                const clientesDiv = document.getElementById("clientes");

                clientesDiv.innerHTML = "";
                clientes.forEach(cliente => {
                    clientesDiv.innerHTML += `<div class="list-item">${cliente.nome}, Email: ${cliente.email}, Telefone: ${cliente.telefone}</div>`;
                });
            } catch (error) {
                console.error("Erro:", error);
            }
        }

        async function carregarFornecedores() {
            try {
                const response = await fetch(API_URL_FORNECEDORES);
                const fornecedores = await response.json();
                const fornecedoresDiv = document.getElementById("fornecedores");

                fornecedoresDiv.innerHTML = "";
                fornecedores.forEach(fornecedor => {
                    fornecedoresDiv.innerHTML += `<div class="list-item">${fornecedor.nome}, Contato: ${fornecedor.contato}, Telefone: ${fornecedor.telefone}</div>`;
                });
            } catch (error) {
                console.error("Erro:", error);
            }
        }

        async function carregarProdutos() {
            try {
                const response = await fetch(API_URL_PRODUTOS);
                const produtos = await response.json();
                const produtosDiv = document.getElementById("produtos");

                produtosDiv.innerHTML = "";
                produtos.forEach(produto => {
                    produtosDiv.innerHTML += `<div class="list-item">${produto.nome}, Preço: R$${produto.preco}, Fornecedor ID: ${produto.fornecedorID}</div>`;
                });
            } catch (error) {
                console.error("Erro:", error);
            }
        }

        async function carregarNotasFiscais() {
            try {
                const response = await fetch(API_URL_NOTAS_FISCAIS);
                const notasFiscais = await response.json();
                const notasFiscaisDiv = document.getElementById("notasFiscais");

                notasFiscaisDiv.innerHTML = "";
                notasFiscais.forEach(nota => {
                    notasFiscaisDiv.innerHTML += `<div class="list-item">Nota: ${nota.numero}, Data: ${nota.dataEmissao}, Valor: R$${nota.valorTotal}</div>`;
                });
            } catch (error) {
                console.error("Erro:", error);
            }
        }

        document.getElementById("clienteForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const nome = document.getElementById("nome").value;
            const email = document.getElementById("email").value;
            const telefone = document.getElementById("telefone").value;

            const novoCliente = { nome, email, telefone };

            try {
                const response = await fetch(API_URL_CLIENTES, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(novoCliente)
                });

                if (response.ok) {
                    alert("Cliente adicionado com sucesso!");
                    document.getElementById("clienteForm").reset();
                    carregarClientes();
                } else {
                    alert("Erro ao adicionar cliente.");
                }
            } catch (error) {
                console.error("Erro:", error);
            }
        });

        document.getElementById("fornecedorForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const nome = document.getElementById("nomeFornecedor").value;
            const contato = document.getElementById("contato").value;
            const telefoneFornecedor = document.getElementById("telefoneFornecedor").value;

            const novoFornecedor = { nome, contato, telefone: telefoneFornecedor };

            try {
                const response = await fetch(API_URL_FORNECEDORES, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(novoFornecedor)
                });

                if (response.ok) {
                    alert("Fornecedor adicionado com sucesso!");
                    document.getElementById("fornecedorForm").reset();
                    carregarFornecedores();
                } else {
                    alert("Erro ao adicionar fornecedor.");
                }
            } catch (error) {
                console.error("Erro:", error);
            }
        });

        document.getElementById("produtoForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const nome = document.getElementById("nomeProduto").value;
            const preco = document.getElementById("preco").value;
            const fornecedorID = document.getElementById("fornecedorIDProduto").value;

            const novoProduto = { nome, preco, fornecedorID };

            try {
                const response = await fetch(API_URL_PRODUTOS, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(novoProduto)
                });

                if (response.ok) {
                    alert("Produto adicionado com sucesso!");
                    document.getElementById("produtoForm").reset();
                    carregarProdutos();
                } else {
                    alert("Erro ao adicionar produto.");
                }
            } catch (error) {
                console.error("Erro:", error);
            }
        });

        document.getElementById("notaFiscalForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            const numero = document.getElementById("numeroNota").value;
            const dataEmissao = document.getElementById("dataEmissao").value;
            const valorTotal = document.getElementById("valorTotal").value;

            const novaNotaFiscal = { numero, dataEmissao, valorTotal };

            try {
                const response = await fetch(API_URL_NOTAS_FISCAIS, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(novaNotaFiscal)
                });

                if (response.ok) {
                    alert("Nota fiscal adicionada com sucesso!");
                    document.getElementById("notaFiscalForm").reset();
                    carregarNotasFiscais();
                } else {
                    alert("Erro ao adicionar nota fiscal.");
                }
            } catch (error) {
                console.error("Erro:", error);
            }
        });

        carregarClientes();
        carregarFornecedores();
        carregarProdutos();
        carregarNotasFiscais(); 
    </script>
</body>
</html>
